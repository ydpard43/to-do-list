"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[7274],{7274:(B,f,r)=>{r.r(f),r.d(f,{TasksPageModule:()=>A});var p=r(177),l=r(3092),d=r(4341),T=r(9228);const h=Object.freeze({TEXTS:{WELCOME:"Bienvenido",TASK_TITLE_PLACEHOLDER:"Ingresa la Tarea"},BUTTONS:{ADD:{TEXT:"Nueva Tarea"}}});var C=r(467);const _=Object.freeze({TEXTS:{NO_CATEGORY:"Sin categor\xeda asignada",DELETE_CONFIRM_TITLE:"\xbfEliminar actividad?",DELETE_CONFIRM_MESSAGE:'\xbfSeguro que deseas borrar la actividad "{title}" de la categor\xeda "{category}"?',DELETE_CANCELLED:"Se cancel\xf3 la eliminaci\xf3n"},BUTTONS:{DELETE:{LABEL:"Eliminar",SLOT:"end",COLOR:"danger"},CANCEL:{LABEL:"Cancelar"}},CHECKBOX:{STATUS_TOGGLE:{SLOT:"start"}},STATUS:{PENDING:"PENDING",IN_PROGRESS:"IN_PROGRESS",COMPLETED:"COMPLETED",CANCELED:"CANCELED"}});var m=r(7419),t=r(4438),b=r(2698),E=r(6565),k=r(5357);const M=(o,s)=>({completed:o,pending:s}),O=o=>({completed:o});function v(o,s){if(1&o){const a=t.RV6();t.j41(0,"ion-button",17),t.bIt("click",function(n){t.eBV(a);const i=t.XpG().$implicit;return t.XpG(2).presentDeleteConfirm(i),t.Njj(n.stopPropagation())}),t.nrm(1,"ion-icon",18),t.k0s()}}function x(o,s){if(1&o){const a=t.RV6();t.j41(0,"ion-col",5)(1,"ion-card",6),t.bIt("click",function(){const n=t.eBV(a).$implicit,i=t.XpG(2);return t.Njj(i.openEditTaskModal(n))}),t.j41(2,"ion-card-content")(3,"div",7)(4,"div",8)(5,"ion-checkbox",9),t.bIt("ionChange",function(n){const i=t.eBV(a).$implicit;return t.XpG(2).toggleCompletion(i),t.Njj(n.stopPropagation())}),t.k0s(),t.j41(6,"h2",10),t.EFF(7),t.k0s()(),t.j41(8,"div",11),t.DNE(9,v,2,0,"ion-button",12),t.k0s()(),t.j41(10,"div",13)(11,"div",14),t.nrm(12,"ion-icon",15),t.j41(13,"span"),t.EFF(14),t.k0s()(),t.j41(15,"div",14),t.nrm(16,"ion-icon",16),t.j41(17,"span"),t.EFF(18),t.nI1(19,"date"),t.k0s()()()()()()}if(2&o){const a=s.$implicit,e=t.XpG(2);t.R7$(),t.Y8G("ngClass",t.l_i(13,M,a.status===e.config.STATUS.COMPLETED,a.status===e.config.STATUS.PENDING)),t.R7$(4),t.Y8G("checked",a.status===e.config.STATUS.COMPLETED),t.R7$(),t.FS9("title",a.title),t.Y8G("ngClass",t.eq3(16,O,a.status===e.config.STATUS.COMPLETED)),t.R7$(),t.SpI(" ",a.title," "),t.R7$(2),t.Y8G("ngIf",e.allowTaskDeletion),t.R7$(5),t.JRh(a.categoryId||e.config.TEXTS.NO_CATEGORY),t.R7$(2),t.AVh("ion-hide",!a.date),t.R7$(2),t.JRh(t.i5U(19,10,a.date,"MMM d, y")||"\u3000")}}function y(o,s){if(1&o&&(t.qex(0),t.DNE(1,x,20,18,"ion-col",4),t.bVm()),2&o){const a=t.XpG();t.R7$(),t.Y8G("ngForOf",a.filteredTasks)}}function P(o,s){1&o&&(t.j41(0,"div",19)(1,"p"),t.EFF(2,"No hay tareas en esta secci\xf3n."),t.k0s()())}let u=(()=>{var o;class s{constructor(e,n,i){this.taskService=e,this.alertService=n,this.modalService=i,this.tasks=[],this.filteredTasks=[],this.selectedTab="all",this.config=_,this.filterCategoryId="",this.allowTaskDeletion=null,this.allowTaskUpdate=null,this.page=0,this.pageSize=20,this.totalTasks=0}ngOnInit(){this.loadTasks()}ngOnChanges(){this.applyFilter()}loadTasks(){this.page=0,this.tasks=this.taskService.getTasks(0,this.pageSize)||[],this.totalTasks=this.tasks.length,this.applyFilter()}loadMoreTasks(e){this.page++;const n=this.taskService.getTasks(this.page,this.pageSize);this.tasks=[...this.tasks,...n],this.applyFilter(),e.target.complete(),this.filteredTasks.length>=this.totalTasks&&(e.target.disabled=!0)}applyFilter(e="all"){this.selectedTab=e;const n=this.filterCategoryId.trim().toLowerCase();this.filteredTasks=""===n?this.tasks.slice(0,(this.page+1)*this.pageSize):this.tasks.filter(i=>{var c,g;const U=null===(c=i.categoryId)||void 0===c?void 0:c.toLowerCase().includes(n),z=null===(g=i.title)||void 0===g?void 0:g.toLowerCase().includes(n);return U||z}).slice(0,(this.page+1)*this.pageSize),this.filteredTasks=this.filterTasks()}toggleCompletion(e){this.taskService.toggleTaskCompletion(e),this.loadTasks()}presentDeleteConfirm(e){var n=this;return(0,C.A)(function*(){const i=`${n.config.TEXTS.DELETE_CONFIRM_MESSAGE.replace("{title}",e.title).replace("{category}",e.categoryId||n.config.TEXTS.NO_CATEGORY)}`;n.alertService.presentDeleteConfirm(n.config,()=>{n.deleteTask(e.id)},i)})()}deleteTask(e){this.allowTaskDeletion&&(this.taskService.deleteTask(e),this.loadTasks())}openEditTaskModal(e){this.modalService.openModal("editTasks","custom-modal",{task:e,allowTaskUpdate:this.allowTaskUpdate},()=>{this.loadTasks()})}filterTasks(){switch(this.selectedTab){case"pending":return this.filteredTasks.filter(e=>e.status===m.e.Pending);case"completed":return this.filteredTasks.filter(e=>e.status===m.e.Completed);default:return this.filteredTasks}}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(b.R),t.rXU(E.u),t.rXU(k.M))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-list-tasks"]],inputs:{filterCategoryId:"filterCategoryId",allowTaskDeletion:"allowTaskDeletion",allowTaskUpdate:"allowTaskUpdate"},features:[t.OA$],decls:12,vars:8,consts:[["noTasks",""],[1,"tab-bar"],[3,"click"],[4,"ngIf","ngIfElse"],["size","12","size-md","6","size-lg","4",4,"ngFor","ngForOf"],["size","12","size-md","6","size-lg","4"],[1,"task-card",3,"click","ngClass"],[1,"task-header"],[1,"task-title-wrapper"],["title","Marcar como completada",1,"task-checkbox",3,"ionChange","checked"],[1,"task-title",3,"ngClass","title"],[1,"task-actions"],["fill","clear","class","delete-button","title","Eliminar tarea",3,"click",4,"ngIf"],[1,"task-meta-row"],[1,"meta-item"],["name","pricetag-outline"],["name","calendar-outline"],["fill","clear","title","Eliminar tarea",1,"delete-button",3,"click"],["name","trash-outline"],[1,"empty-state"]],template:function(e,n){if(1&e){const i=t.RV6();t.j41(0,"div",1)(1,"button",2),t.bIt("click",function(){return t.eBV(i),t.Njj(n.applyFilter("all"))}),t.EFF(2," Todas "),t.k0s(),t.j41(3,"button",2),t.bIt("click",function(){return t.eBV(i),t.Njj(n.applyFilter("pending"))}),t.EFF(4," Pendientes "),t.k0s(),t.j41(5,"button",2),t.bIt("click",function(){return t.eBV(i),t.Njj(n.applyFilter("completed"))}),t.EFF(6," Completadas "),t.k0s()(),t.j41(7,"ion-grid")(8,"ion-row"),t.DNE(9,y,2,1,"ng-container",3)(10,P,3,0,"ng-template",null,0,t.C5r),t.k0s()()}if(2&e){const i=t.sdS(11);t.R7$(),t.AVh("active","all"===n.selectedTab),t.R7$(2),t.AVh("active","pending"===n.selectedTab),t.R7$(2),t.AVh("active","completed"===n.selectedTab),t.R7$(4),t.Y8G("ngIf",n.filteredTasks.length>0)("ngIfElse",i)}},dependencies:[p.YU,p.Sq,p.bT,l.Jm,l.b_,l.I9,l.eY,l.hU,l.lO,l.iq,l.ln,l.hB,p.vh],styles:['.task-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border-radius:14px;margin-bottom:14px;background-color:#fff;padding:12px 14px;position:relative;transition:transform .2s ease,box-shadow .2s ease;border:1px solid rgba(0,0,0,.05);box-shadow:0 2px 4px #0000000a,0 6px 12px #0000000d;cursor:pointer}.task-card.completed[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:12px;bottom:12px;width:4px;background-color:var(--ion-color-success);border-radius:2px}.task-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding-bottom:8px;border-bottom:1px solid #efefef}.task-title-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1;min-width:0}.task-title[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;margin:0;color:#222;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.task-title.completed[_ngcontent-%COMP%]{color:#aaa;text-decoration:line-through}.task-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.task-checkbox[_ngcontent-%COMP%]{--background: transparent;--checkmark-color: #ffffff;--border-radius: 50%;--size: 20px;margin:0;--checkbox-background-checked: var(--ion-color-primary);flex-shrink:0}.delete-button[_ngcontent-%COMP%]{--color: var(--ion-color-danger);padding:0;height:auto}.delete-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.2rem;color:#ff4d4d;opacity:.6;transition:opacity .2s ease,transform .2s ease}.task-meta-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;font-size:.85rem;color:#666;margin-top:10px;padding-left:2px}.meta-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.meta-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem;color:#999}.meta-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.tab-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin:18px 0 12px;padding:6px;border-radius:8px}.tab-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;font-weight:600;font-size:.95rem;padding:8px 16px;cursor:pointer;border-radius:20px;transition:all .2s ease-in-out;color:var(--ion-color-medium)}.tab-bar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:var(--ion-color-primary);color:#fff;box-shadow:0 2px 6px #007bff33}ion-row[_ngcontent-%COMP%]{margin-bottom:6vw}.empty-state[_ngcontent-%COMP%]{width:100%;text-align:center;padding:16px 0;color:#999;font-size:1rem}@media screen and (max-width: 360px){.task-title[_ngcontent-%COMP%]{font-size:.95rem}.task-meta-row[_ngcontent-%COMP%]{font-size:.75rem}.meta-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:.9rem}.tab-bar[_ngcontent-%COMP%]{flex-direction:column;gap:6px;padding:10px}.tab-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}']}),s})();var I=r(5553),S=r(6619),F=r(9487),L=r(2526);const w=Object.freeze({TEXTS:{FILTER_INPUT_CATEGORY_PLACEHOLDER:"Buscar por actividad o categor\xeda",FILTER_CATEGORY_PLACEHOLDER:"Filtrar por actividad o categor\xeda"}});function R(o,s){if(1&o){const a=t.RV6();t.j41(0,"ion-button",4),t.bIt("click",function(){t.eBV(a);const n=t.XpG();return t.Njj(n.clearFilter())}),t.nrm(1,"ion-icon",5),t.k0s()}}let G=(()=>{var o;class s{constructor(){this.filterQuery="",this.config=w,this.filterCategory=new t.bkB}onFilterChange(){this.filterCategory.emit(this.filterQuery.trim().toLowerCase())}clearFilter(){this.filterQuery="",this.onFilterChange()}}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.VBU({type:o,selectors:[["app-filter-tasks"]],outputs:{filterCategory:"filterCategory"},decls:4,vars:3,consts:[[1,"search-container"],["name","search-outline",1,"search-icon"],[1,"search-input",3,"ngModelChange","ionInput","placeholder","ngModel"],["size","small","fill","clear","color","danger","class","clear-icon",3,"click",4,"ngIf"],["size","small","fill","clear","color","danger",1,"clear-icon",3,"click"],["name","close-outline"]],template:function(e,n){1&e&&(t.j41(0,"div",0),t.nrm(1,"ion-icon",1),t.j41(2,"ion-input",2),t.mxI("ngModelChange",function(c){return t.DH7(n.filterQuery,c)||(n.filterQuery=c),c}),t.bIt("ionInput",function(){return n.onFilterChange()}),t.k0s(),t.DNE(3,R,2,0,"ion-button",3),t.k0s()),2&e&&(t.R7$(2),t.FS9("placeholder",n.config.TEXTS.FILTER_INPUT_CATEGORY_PLACEHOLDER),t.R50("ngModel",n.filterQuery),t.R7$(),t.Y8G("ngIf",n.filterQuery))},dependencies:[p.bT,d.BC,d.vS,l.Jm,l.iq,l.$w,l.Gw],styles:[".search-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;border-radius:16px;margin:20px;padding:10px 16px;box-shadow:0 2px 6px #0000000d}.search-icon[_ngcontent-%COMP%], .filter-icon[_ngcontent-%COMP%], .clear-icon[_ngcontent-%COMP%]{font-size:1.4rem;color:#666;cursor:pointer;transition:color .2s ease}.search-icon[_ngcontent-%COMP%]:hover, .filter-icon[_ngcontent-%COMP%]:hover, .clear-icon[_ngcontent-%COMP%]:hover{color:#333}.search-input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;font-size:1rem;background:transparent;color:#333}.search-input[_ngcontent-%COMP%]::placeholder{color:#aaa}"]}),s})();function D(o,s){if(1&o){const a=t.RV6();t.j41(0,"app-filter-tasks",3),t.bIt("filterCategory",function(n){t.eBV(a);const i=t.XpG();return t.Njj(i.filterCategoryId=n)}),t.k0s()}}const j=[{path:"",component:(()=>{var o;class s{constructor(e,n,i){this.categoryService=e,this.remoteConfigService=n,this.modalService=i,this.filterCategoryId="",this.isModalOpen=!1,this.currentDate=new Date,this.config=h}ngOnInit(){this.initRemoteConfig()}initRemoteConfig(){this.remoteConfigService.activateRemoteConfig().subscribe(()=>{this.allowTaskCompletion$=this.remoteConfigService.getBooleanValue$("allowTaskComplete"),this.allowTaskDeletion$=this.remoteConfigService.getBooleanValue$("allowTaskDeletion"),this.allowTaskUpdate$=this.remoteConfigService.getBooleanValue$("allowTaskUpdate"),this.showAddTaskButton$=this.remoteConfigService.getBooleanValue$("allowTaskAdd"),this.enableCategoryFilter$=this.remoteConfigService.getBooleanValue$("enableCategoryFilter")})}ngAfterViewInit(){this.loadTasks()}addCategory(e){this.categoryService.addCategory(e.title),this.loadTasks()}loadTasks(){this.listTasksComponent.loadTasks()}loadCategories(){this.ListCategories.loadCategories()}openAddModal(){this.modalService.openModal("addTask","custom-modal",{},()=>{this.loadTasks()})}}return(o=s).\u0275fac=function(e){return new(e||o)(t.rXU(S.w),t.rXU(F.S),t.rXU(k.M))},o.\u0275cmp=t.VBU({type:o,selectors:[["app-tasks"]],viewQuery:function(e,n){if(1&e&&(t.GBs(u,5),t.GBs(I.s,5)),2&e){let i;t.mGM(i=t.lsd())&&(n.listTasksComponent=i.first),t.mGM(i=t.lsd())&&(n.ListCategories=i.first)}},decls:7,vars:11,consts:[[3,"action","config"],[3,"filterCategory",4,"ngIf"],[3,"filterCategoryId","allowTaskDeletion","allowTaskUpdate"],[3,"filterCategory"]],template:function(e,n){1&e&&(t.j41(0,"ion-content")(1,"app-header",0),t.bIt("action",function(){return n.openAddModal()}),t.k0s(),t.DNE(2,D,1,0,"app-filter-tasks",1),t.nI1(3,"async"),t.nrm(4,"app-list-tasks",2),t.nI1(5,"async"),t.nI1(6,"async"),t.k0s()),2&e&&(t.R7$(),t.Y8G("config",n.config),t.R7$(),t.Y8G("ngIf",t.bMT(3,5,n.enableCategoryFilter$)),t.R7$(2),t.Y8G("filterCategoryId",n.filterCategoryId)("allowTaskDeletion",t.bMT(5,7,n.allowTaskDeletion$))("allowTaskUpdate",t.bMT(6,9,n.allowTaskUpdate$)))},dependencies:[p.bT,l.W9,L.l,u,G,p.Jj],styles:[".toolbar[_ngcontent-%COMP%]{padding:10px}.new-task-button[_ngcontent-%COMP%]{margin-left:auto}@media (max-width: 768px){.new-task-button[_ngcontent-%COMP%]{margin-left:0}}ion-fab-button[title][_ngcontent-%COMP%]{position:relative}ion-fab-button[title][_ngcontent-%COMP%]:after{position:absolute;content:attr(title);z-index:1;right:55px;bottom:4px;background-color:var(--ion-color-primary);padding:9px;border-radius:15px;color:#fff;box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}"]}),s})()}];let N=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[T.iI.forChild(j),T.iI]}),s})();var $=r(7981);let A=(()=>{var o;class s{}return(o=s).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.$C({type:o}),o.\u0275inj=t.G2t({imports:[p.MD,d.YN,l.bv,N,$.G]}),s})()}}]);